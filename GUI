--[[
	 __  __              _____   _   _ 
	|  \/  |     /\     |_   _| | \ | |
	| \  / |    /  \      | |   |  \| |
	| |\/| |   / /\ \     | |   | . ` |
	| |  | |  / ____ \   _| |_  | |\  |
	|_|  |_| /_/    \_\ |_____| |_| \_|
--]]
local Player = game.Players.LocalPlayer
local Mouse = Player:GetMouse()
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGuiService = game:GetService("CoreGui")
local RunService = game:GetService("RunService")
local TextService = game:GetService("TextService")

local TweenTime = 0.1
local Level = 1

local GlobalTweenInfo = TweenInfo.new(TweenTime)
local AlteredTweenInfo = TweenInfo.new(TweenTime, Enum.EasingStyle.Sine, Enum.EasingDirection.Out)

local function Tween(GuiObject, Dictionary)
	local TweenBase = TweenService:Create(GuiObject, GlobalTweenInfo, Dictionary)
	TweenBase:Play()
	return TweenBase
end

local function GetXY(GuiObject)
	local X, Y = Mouse.X - GuiObject.AbsolutePosition.X, Mouse.Y - GuiObject.AbsolutePosition.Y
	local MaxX, MaxY = GuiObject.AbsoluteSize.X, GuiObject.AbsoluteSize.Y
	X, Y = math.clamp(X, 0, MaxX), math.clamp(Y, 0, MaxY)
	return X, Y, X/MaxX, Y/MaxY
end

local UILibrary = {}

function UILibrary.Load(GUITitle)

	local LTO = Instance.new("ScreenGui")
	LTO.Name = "MainGui"
	LTO.ZIndexBehavior = Enum.ZIndexBehavior.Global
	LTO.ResetOnSpawn = false
	if game.PlaceId == 8204899140 or RunService:IsStudio() then
		LTO.Parent = game.Players.LocalPlayer.PlayerGui
	else
		LTO.Parent = CoreGuiService
	end


	local Drag = Instance.new("Frame")
	Drag.Name = "Drag"
	Drag.Selectable = true
	Drag.Active = true
	Drag.Parent = LTO
	Drag.Position = UDim2.new(0.719, 0,0.684, 0)
	Drag.Size = UDim2.new(0.199, 0,0.028, 0)
	Drag.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	Drag.BackgroundTransparency = 1
	Drag.Draggable = true
	Drag.ZIndex = 2

	local Main = Instance.new("ImageLabel")
	Main.Name = "Main"
	Main.Parent = Drag
	Main.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	Main.BackgroundTransparency = 1
	Main.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Main.Position = UDim2.new(0.013, 0,0.275, 0)
	Main.Size = UDim2.new(0.974, 0,7.236, 0)
	Main.Image = "rbxassetid://8999998448"

	local TextLabel = Instance.new("TextLabel")
	TextLabel.Name = "TextLabel"
	TextLabel.Text = GUITitle
	TextLabel.Font = "SourceSansBold"
	TextLabel.TextColor3 = Color3.fromRGB(80, 80, 80)
	TextLabel.Parent = Drag
	TextLabel.BackgroundTransparency = 1
	TextLabel.Position = UDim2.new(0.461, 0,0.711, 0)
	TextLabel.Size = UDim2.new(0.073, 0,0.422, 0)
	TextLabel.TextScaled = true
	TextLabel.TextWrapped = true
	TextLabel.ZIndex = 1

	local TabLibrary = {}

	function TabLibrary.AddPage(PageTitle, PlayerBarIncluded)

		local Tab = Instance.new("Frame")
		Tab.Name = PageTitle
		Tab.Parent = Drag
		Tab.Position = UDim2.new(0.051, 0,2.64, 0)
		Tab.Size = UDim2.new(0.892, 0,4.306, 0)
		Tab.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		Tab.BackgroundTransparency = 1

		local UIList = Instance.new("UIListLayout")
		UIList.Parent = Tab
		UIList.Padding = UDim.new(0.05,0)
		UIList.HorizontalAlignment = "Center"

		local PageLibrary = {}

		function PageLibrary.AddButton(Text, Callback)

			local ButtonMain = Instance.new("ImageButton")
			ButtonMain.Name = "ButtonMain"
			ButtonMain.Parent = Tab
			ButtonMain.BackgroundTransparency = 1
			ButtonMain.Size = UDim2.new(0.952, 0,0.178, 0)
			ButtonMain.ZIndex = 3
			ButtonMain.Image = "rbxassetid://9000049257"
			ButtonMain.HoverImage = "rbxassetid://9001105972"

			local Button = Instance.new("ImageLabel")
			Button.Name = "Button"
			Button.Parent = ButtonMain
			Button.BackgroundTransparency = 1
			Button.ImageColor3 = Color3.fromRGB(221, 55, 58)
			Button.Position = UDim2.new(0.946, 0,0.209, 0)
			Button.Size = UDim2.new(0.038, 0,0.52, 0)
			Button.ZIndex = 3
			Button.Image = "rbxassetid://9000063581"

			local TextLabel = Instance.new("TextLabel")
			TextLabel.Name = "TextLabel"
			TextLabel.Text = Text
			TextLabel.Font = "SourceSansBold"
			TextLabel.TextColor3 = Color3.fromRGB(80, 80, 80)
			TextLabel.Parent = ButtonMain
			TextLabel.BackgroundTransparency = 1
			TextLabel.Position = UDim2.new(0.033, 0,0.16, 0)
			TextLabel.Size = UDim2.new(0.289, 0,0.67, 0)
			TextLabel.TextScaled = true
			TextLabel.TextWrapped = true
			TextLabel.TextXAlignment = "Left"
			TextLabel.ZIndex = 4


			local function ButtonH()
				local Color = true

				ButtonMain.MouseButton1Down:Connect(function()
					if Color == true then
						local tween = TweenService:Create(Button,TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out,0,false,0),{
							ImageColor3 = Color3.fromRGB(47, 121, 84)
						})
						tween:Play()
						Color = not Color
					else
						local tween = TweenService:Create(Button,TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out,0,false,0),{
							ImageColor3 = Color3.fromRGB(221, 55, 58)
						})
						tween:Play()
						Color = not Color
					end
					Callback()
				end)
			end
			coroutine.wrap(ButtonH)()
		end
		
		
		
		function PageLibrary.AddKeybindButton(Text, Callback)
			local Color = true
			local selecting = false
			local keyn

			local ButtonMain = Instance.new("ImageButton")
			ButtonMain.Name = "ButtonMain"
			ButtonMain.Parent = Tab
			ButtonMain.BackgroundTransparency = 1
			ButtonMain.Size = UDim2.new(0.952, 0,0.178, 0)
			ButtonMain.ZIndex = 3
			ButtonMain.Image = "rbxassetid://9000049257"
			ButtonMain.HoverImage = "rbxassetid://9001105972"

			local Button = Instance.new("ImageLabel")
			Button.Name = "Button"
			Button.Parent = ButtonMain
			Button.BackgroundTransparency = 1
			Button.ImageColor3 = Color3.fromRGB(221, 55, 58)
			Button.Position = UDim2.new(0.946, 0,0.209, 0)
			Button.Size = UDim2.new(0.038, 0,0.52, 0)
			Button.ZIndex = 3
			Button.Image = "rbxassetid://9000063581"

			local TextLabel = Instance.new("TextLabel")
			TextLabel.Name = "TextLabel"
			TextLabel.Text = Text
			TextLabel.Font = "SourceSansBold"
			TextLabel.TextColor3 = Color3.fromRGB(80, 80, 80)
			TextLabel.Parent = ButtonMain
			TextLabel.BackgroundTransparency = 1
			TextLabel.Position = UDim2.new(0.033, 0,0.16, 0)
			TextLabel.Size = UDim2.new(0.289, 0,0.67, 0)
			TextLabel.TextScaled = true
			TextLabel.TextWrapped = true
			TextLabel.TextXAlignment = "Left"
			TextLabel.ZIndex = 4
			
			local ButtonMain2 = Instance.new("ImageButton")
			ButtonMain2.Name = "ButtonMain"
			ButtonMain2.Parent = Tab
			ButtonMain2.BackgroundTransparency = 1
			ButtonMain2.Size = UDim2.new(0.952, 0,0.178, 0)
			ButtonMain2.ZIndex = 3
			ButtonMain2.Image = "rbxassetid://9000049257"
			ButtonMain2.HoverImage = "rbxassetid://9001105972"

			local Key = Instance.new("ImageLabel")
			Key.Name = "Button"
			Key.Parent = ButtonMain2
			Key.BackgroundTransparency = 1
			Key.ImageColor3 = Color3.fromRGB(43, 43, 43)
			Key.Position = UDim2.new(0.911, 0,0.209, 0)
			Key.Size = UDim2.new(0.073, 0,0.52, 0)
			Key.ZIndex = 3
			Key.Image = "rbxassetid://9001133582"
			
			local TextLabelK = Instance.new("TextLabel")
			TextLabelK.Name = "TextLabel"
			TextLabelK.Text = "X"
			TextLabelK.Font = "SourceSansBold"
			TextLabelK.TextColor3 = Color3.fromRGB(80, 80, 80)
			TextLabelK.Parent = Key
			TextLabelK.BackgroundTransparency = 1
			TextLabelK.Position = UDim2.new(0, 0,-0.1, 0)
			TextLabelK.Size = UDim2.new(1, 0,1, 0)
			TextLabelK.TextScaled = true
			TextLabelK.TextWrapped = true
			TextLabelK.ZIndex = 4

			local TextLabel = Instance.new("TextLabel")
			TextLabel.Name = "TextLabel"
			TextLabel.Text = "Keybind"
			TextLabel.Font = "SourceSansBold"
			TextLabel.TextColor3 = Color3.fromRGB(80, 80, 80)
			TextLabel.Parent = ButtonMain2
			TextLabel.BackgroundTransparency = 1
			TextLabel.Position = UDim2.new(0.033, 0,0.16, 0)
			TextLabel.Size = UDim2.new(0.289, 0,0.67, 0)
			TextLabel.TextScaled = true
			TextLabel.TextWrapped = true
			TextLabel.TextXAlignment = "Left"
			TextLabel.ZIndex = 4
			
			local function InputButton()

				ButtonMain2.MouseButton1Click:Connect(function(input, gameProcessed)
					if gameProcessed then return end
					selecting = false
					if selecting == false then
						TextLabelK.Text = "-"
						UserInputService.InputBegan:Connect(function(input, gameProcessed)
							if selecting == false then
								if input.KeyCode ~= Enum.KeyCode.Backspace then
									local key = string.split(tostring(input.KeyCode), ".")
									TextLabelK.Text = key[3]
									keyn = input.KeyCode
									wait(0.1)
									selecting = true
								else
									keyn = nil
									TextLabelK.Text = "-"
									wait(0.1)
									selecting = true
								end
							end
						end)
					end
				end)
				UserInputService.InputBegan:Connect(function(input, gameProcessed)
					
					if gameProcessed then return end
					if selecting == true then
						if input.KeyCode == keyn then
							if Color == true then
								local tween = TweenService:Create(Button,TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out,0,false,0),{
									ImageColor3 = Color3.fromRGB(47, 121, 84)
								})
								tween:Play()
								Color = not Color
							else
								local tween = TweenService:Create(Button,TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out,0,false,0),{
									ImageColor3 = Color3.fromRGB(221, 55, 58)
								})
								tween:Play()
								Color = not Color
							end
							Callback()
						end
					end
				end)
			end
			coroutine.wrap(InputButton)()
			
			
			local function ButtonH()
				

				ButtonMain.MouseButton1Down:Connect(function()
					if Color == true then
						local tween = TweenService:Create(Button,TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out,0,false,0),{
							ImageColor3 = Color3.fromRGB(47, 121, 84)
						})
						tween:Play()
						Color = not Color
					else
						local tween = TweenService:Create(Button,TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out,0,false,0),{
							ImageColor3 = Color3.fromRGB(221, 55, 58)
						})
						tween:Play()
						Color = not Color
					end
					Callback()
				end)
			end
			coroutine.wrap(ButtonH)()
			
		end
		
		
		
	--[[
	|   |   |   |   |   |   |   |   |   |
	|   |   |   |   |   |   |   |   |   |
	|   |   |   |   |   |   |   |   |   |
	--]]

		return PageLibrary


	end
	return TabLibrary


end
return UILibrary
